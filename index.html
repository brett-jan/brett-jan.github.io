<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>Meeting Cost â€” Enbridge Style (Baseline v1.2.0)</title>
<!-- Changelog
v1.2.0  Baseline locked: adopts v1.1.0 with share-link, fixed-width Count column, counts centered, buttons deduplicated, and layout tweaks.
v1.1.0  Added share-link via URL hash. Start creates an anchor with start time and mix. Copy link so others see same live total. Viewer auto-joins.
v1.0.0  Baseline locked: light Enbridge styling, yellow accent, cost > timer, no $/hr inputs, start toggles pause/resume, no auto-start, compact layout, plus/minus visible, counts centered.
-->
<style>
  :root{
    --gold:#FFC72C;
    --text:#1b1f23;
    --muted:#6b7280;
    --panel:#ffffff;
    --bg:#f6f7f9;
    --line:#e5e7eb;
    --line-2:#d6d9de;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0; background:var(--bg); color:var(--text); font:16px/1.35 Arial, Helvetica, sans-serif}

  .wrap{height:100vh; display:flex; align-items:flex-start; justify-content:center; padding:10px}
  .card{
    width:100%; max-width:720px; height:100%;
    display:grid; grid-template-columns:1fr; grid-template-rows:auto auto auto auto auto; 
    grid-template-areas:
      'brand'
      'metrics'
      'attn'
      'controls'
      'share';
    gap:12px;
    background:var(--panel);
    border:1px solid var(--line); padding:14px;
    box-shadow:0 8px 30px rgba(0,0,0,.06);
    overflow:hidden;
  }

  .brand{display:flex; align-items:center; gap:10px}
  .dot{width:12px; height:12px; border-radius:50%; background:var(--gold); box-shadow:0 0 0 3px rgba(255,199,44,.28)}
  .brand h1{margin:0; font-size:18px; font-weight:700; letter-spacing:.02em}

  .metrics{display:grid; grid-template-columns:1.1fr .9fr; gap:12px}
  .tile{background:#fff; border:1px solid var(--line); padding:12px}
  .label{color:var(--muted); font-size:11px; letter-spacing:.12em; text-transform:uppercase}
  .money{font-size:clamp(30px,7.6vw,46px); font-weight:800; margin-top:6px; font-variant-numeric:tabular-nums}
  .time{font-size:clamp(22px,6.2vw,34px); font-weight:700; margin-top:8px; font-variant-numeric:tabular-nums}
  .underline{height:6px; background:var(--gold); margin-top:8px}
  .sub{font-size:12px; margin-top:8px; color:#374151}

  .attn{background:#fff; border:1px solid var(--line); padding:10px; display:grid; grid-template-rows:auto 1fr; min-height:0}
  .thead{display:grid; grid-template-columns:1fr 48%; gap:10px; padding:6px 8px; color:#6b7280; font-size:11px; letter-spacing:.12em; text-transform:uppercase; border-bottom:1px dashed var(--line-2)}
  .rows{display:grid; gap:8px; overflow:hidden; padding-top:6px}
  .row{display:grid; grid-template-columns:1fr 48%; gap:10px; align-items:center; background:#fff; border:1px solid var(--line); padding:8px; min-width:0}
  .role{font-weight:700; font-size:14px; color:#111827}

  .qty{display:grid; grid-template-columns:32px 1fr 32px; gap:6px; min-width:160px; justify-self:end}
  .qty input{width:100%; min-width:0; height:34px; border:1px solid var(--line-2); background:#fff; color:#111; font-variant-numeric:tabular-nums; text-align:center; padding:0; line-height:34px; appearance:textfield; -moz-appearance:textfield}
  .qty input::-webkit-outer-spin-button,.qty input::-webkit-inner-spin-button{-webkit-appearance:none; margin:0}
  button{height:34px; border:1px solid var(--line-2); background:#f9fafb; color:#111827; font-weight:800; cursor:pointer}
  .primary{background:var(--gold); color:#111; border-color:#c8a321}
  .ghost{background:#f3f4f6}

  .share{background:#fff; border:1px dashed var(--line-2); padding:10px; color:#374151; font-size:13px}
  .share button{height:32px; border:1px solid var(--line-2); background:#f9fafb; color:#111827; font-weight:700; cursor:pointer}

  .controls{display:flex; gap:10px}
  .controls button{flex:1}

  /* compact on short phones */
  @media (max-height:740px){.card{gap:10px; padding:12px} .tile{padding:10px} .money{font-size:clamp(28px,7.2vw,42px)} .time{font-size:clamp(20px,5.8vw,32px)} .rows{gap:6px}}
  @media (max-height:640px){.qty input,button{height:32px; line-height:32px} .row{padding:6px}}
  /* flatten all rounded corners, keep brand dot circular */
  *{border-radius:0 !important}
  .dot{border-radius:50% !important}
  /* assign areas for optional desktop layout */
  .brand{grid-area:brand}
  .metrics{grid-area:metrics}
  .attn{grid-area:attn}
  .controls{grid-area:controls}
  .share{grid-area:share}

  /* desktop layout, side-by-side with larger numbers */
  @media (min-width:1100px){
    .wrap{padding:24px; align-items:center}
    .card{
      max-width:1200px; height:auto;
      grid-template-columns:minmax(420px,1fr) minmax(420px,1fr);
      grid-template-rows:auto 1fr auto;
      grid-template-areas:
        "brand brand"
        "metrics attn"
        "controls share";
      gap:16px;
      align-items:start;
    }
    .metrics{grid-template-columns:1fr; gap:16px}
    .tile{padding:24px}
    .money{font-size:clamp(54px,5.5vw,96px)}
    .time{font-size:clamp(54px,5.5vw,96px)}
    .underline{height:8px}
    .thead{grid-template-columns:1fr 260px}
    .row{grid-template-columns:1fr 260px}
    .qty{min-width:260px; justify-self:end}
    .controls button{height:44px}
  }
    .card{
      max-width:1200px; height:auto;
      grid-template-columns:minmax(420px,1fr) minmax(420px,1fr);
      grid-template-rows:auto 1fr auto;
      grid-template-areas:
        "brand brand"
        "metrics attn"
        "controls share";
      gap:16px;
      align-items:start;
    }
    .metrics{grid-template-columns:1fr; gap:16px}
    .tile{padding:24px}
    .money{font-size:clamp(54px,5.5vw,96px)}
    .time{font-size:clamp(54px,5.5vw,96px)}
    .underline{height:8px}
    .thead{grid-template-columns:1fr 260px}
    .row{grid-template-columns:1fr 260px}
    .qty{min-width:260px; justify-self:end}
    .controls button{height:44px}
  }
    .card{
      max-width:1200px; height:auto;
      grid-template-columns:minmax(420px,1fr) minmax(420px,1fr);
      grid-template-rows:auto 1fr auto;
      grid-template-areas:
        "brand brand"
        "metrics attn"
        "controls share";
      gap:16px;
      align-items:start;
    }
    .metrics{grid-template-columns:1fr; gap:16px}
    .tile{padding:24px}
    .money{font-size:clamp(54px,5.5vw,96px)}
    .time{font-size:clamp(54px,5.5vw,96px)}
    .underline{height:8px}
    .thead{grid-template-columns:1fr 260px}
    .row{grid-template-columns:1fr 260px}
    .qty{min-width:260px; justify-self:end}
    .controls button{height:44px}
  }
    .card{
      max-width:1200px; height:auto;
      grid-template-columns:minmax(420px,1fr) minmax(420px,1fr);
      grid-template-rows:auto 1fr auto;
      grid-template-areas:
        "brand brand"
        "metrics attn"
        "controls share";
      gap:16px;
      align-items:start;
    }
    .metrics{grid-template-columns:1fr; gap:16px}
    .tile{padding:24px}
    .money{font-size:clamp(54px,5.5vw,96px)}
    .time{font-size:clamp(54px,5.5vw,96px)}
    .underline{height:8px}

    /* fixed width count column on wide screens */
    .thead{grid-template-columns:1fr 260px}
    .row{grid-template-columns:1fr 260px}
    .qty{min-width:260px; justify-self:end}

    .controls button{height:44px}
  }
  /* mobile-safe fallback so content never clips when narrow */
  
    .card{
      max-width:720px; width:100%; height:auto; overflow:visible;
      grid-template-columns:1fr !important;
      grid-template-rows:auto auto auto auto auto;
      grid-template-areas:
        "brand"
        "metrics"
        "attn"
        "controls"
        "share" !important;
      gap:12px;
    }
    .metrics{grid-template-columns:1fr !important; gap:12px}
    /* keep attendee count stable */
    .thead{grid-template-columns:1fr 48%}
    .row{grid-template-columns:1fr 48%}
    .qty{min-width:160px; justify-self:end}
  }
    .card{height:auto; min-height:100vh; overflow:visible}
  }
    .card{
      max-width:1200px; height:auto;
      grid-template-columns:minmax(420px,1fr) minmax(420px,1fr);
      grid-template-rows:auto 1fr auto;
      grid-template-areas:
        "brand brand"
        "metrics attn"
        "controls share";
      gap:16px;
      align-items:start;
    }
    .metrics{grid-template-columns:1fr; gap:16px}
    .tile{padding:24px}
    .money{font-size:clamp(54px,5.5vw,96px)}
    .time{font-size:clamp(54px,5.5vw,96px)}
    .underline{height:8px}

    /* fixed width count column on wide screens */
    .thead{grid-template-columns:1fr 260px}
    .row{grid-template-columns:1fr 260px}
    .qty{min-width:260px; justify-self:end}

    .controls button{height:44px}
  }
  /* explicit mobile layout to avoid clipping on narrow screens */
  @media (max-width:979px){
    .wrap{padding:10px; align-items:flex-start}
    .card{
      max-width:720px; width:100%; height:auto; overflow:visible;
      grid-template-columns:1fr;
      grid-template-rows:auto auto auto auto auto;
      grid-template-areas:
        "brand"
        "metrics"
        "attn"
        "controls"
        "share";
      gap:12px;
    }
    .metrics{grid-template-columns:1fr; gap:12px}
    .thead{grid-template-columns:1fr 48%}
    .row{grid-template-columns:1fr 48%}
    .qty{min-width:160px; justify-self:end}
  }
  /* FORCE SINGLE-COLUMN ON NARROW VIEWPORTS */
  @media (max-width:1099px){
    .wrap{padding:10px; align-items:flex-start}
    .card{
      max-width:720px; width:100%; height:auto; overflow:visible;
      grid-template-columns:1fr !important;
      grid-template-rows:auto auto auto auto auto !important;
      grid-template-areas:
        "brand"
        "metrics"
        "attn"
        "controls"
        "share" !important;
      gap:12px;
    }
    .metrics{grid-template-columns:1fr !important}
    .thead{grid-template-columns:1fr 48%}
    .row{grid-template-columns:1fr 48%}
    .qty{min-width:160px; justify-self:end}
  }
</style>
</head>
<body>
<div class="wrap">
  <div class="card" id="app">
    <div class="brand"><span class="dot"></span><h1>Meeting cost</h1></div>

    <div class="metrics">
      <div class="tile">
        <div class="label">Accumulated cost</div>
        <div class="money" id="cost">$0.00</div>
        <div class="underline"></div>
        <div class="sub" id="rate">Accruing at $0.00 per minute</div>
      </div>
      <div class="tile">
        <div class="label">Live timer</div>
        <div class="time" id="time">00:00</div>
        <div class="sub">mm:ss</div>
      </div>
    </div>

    <div class="attn">
      <div class="thead"><div>Role</div><div>Count</div></div>
      <div class="rows" id="rows"></div>
    </div>

    <div class="controls">
      <button id="startPause" class="primary">Start</button>
      <button id="reset" class="ghost">Reset</button>
    </div>

    <div class="share">
      <div>Share this meeting, copy a link that preserves the start time and attendee mix so others can see the same live total.</div>
      <div style="margin-top:8px; display:flex; gap:8px; align-items:center">
        <button id="copyLink">Copy share link</button>
        <span id="shareStatus" style="color:#6b7280"></span>
      </div>
    </div>
    </div>
  </div>
</div>

<script>
// === v1.1.0 share-link ===
(function(){
  const ROLE_DEFS = [
    {key:'vp',  name:'VPs',             rate:800},
    {key:'dir', name:'Directors',       rate:320},
    {key:'mgr', name:'Managers',        rate:175},
    {key:'sup', name:'Supervisors',     rate:120},
    {key:'ic',  name:'Individual Contributors', rate:100}
  ];

  const state = {
    running:false,
    lastTs:0,
    elapsedMs:0,
    costAccrued:0,
    anchor:null, // { startAt:number, mix: {role:{count,rate}} }
    roles:Object.fromEntries(ROLE_DEFS.map(r=>[r.key,{count:0,rate:r.rate}]))
  };

  const el = {
    time:document.getElementById('time'),
    cost:document.getElementById('cost'),
    rate:document.getElementById('rate'),
    rows:document.getElementById('rows'),
    startPause:document.getElementById('startPause'),
    reset:document.getElementById('reset'),
    copyLink:document.getElementById('copyLink'),
    shareStatus:document.getElementById('shareStatus')
  };

  // Build rows, counts only
  ROLE_DEFS.forEach(r=>{
    const row = document.createElement('div');
    row.className='row';
    row.innerHTML = `
      <div class="role">${r.name}</div>
      <div class="qty">
        <button type="button" aria-label="decrease">âˆ’</button>
        <input type="number" min="0" step="1" value="0" inputmode="numeric" />
        <button type="button" aria-label="increase">+</button>
      </div>`;
    el.rows.appendChild(row);

    const [dec, qty, inc] = row.querySelectorAll('.qty button, .qty input');

    function setQty(v){
      v = Math.max(0,parseInt(v||'0',10));
      qty.value = v;
      state.roles[r.key].count = v;
      draw();
    }
    dec.addEventListener('click', ()=>setQty(parseInt(qty.value || '0', 10) - 1));
    inc.addEventListener('click', ()=>setQty(parseInt(qty.value || '0', 10) + 1));
    qty.addEventListener('input', ()=>setQty(qty.value));
  });

  // Helpers for shareable payload
  function snapshotMix(){
    const out={};
    ROLE_DEFS.forEach(r=>{ const v = state.roles[r.key]; out[r.key] = {count:v.count, rate:v.rate}; });
    return out;
  }
  function encodePayload(obj){
    try{ return btoa(unescape(encodeURIComponent(JSON.stringify(obj)))); }catch(e){ return null; }
  }
  function decodePayload(str){
    try{ return JSON.parse(decodeURIComponent(escape(atob(str)))); }catch(e){ return null; }
  }
  function updateHash(){
    if(!state.anchor) return;
    const url = new URL(location.href);
    url.hash = 'm=' + encodePayload({ startAt: state.anchor.startAt, mix: state.anchor.mix });
    history.replaceState(null,'',url.toString());
  }
  function loadFromHash(){
    const raw = location.hash.replace(/^#/, '');
    const params = new URLSearchParams(raw);
    const m = params.get('m');
    if(!m) return false;
    const payload = decodePayload(m);
    if(!payload || !payload.startAt || !payload.mix) return false;
    state.anchor = { startAt: Number(payload.startAt), mix: payload.mix };
    // seed UI counts from shared mix
    for(const k in payload.mix){ if(state.roles[k]) state.roles[k].count = Number(payload.mix[k].count||0); }
    // reflect counts in inputs
    const keys = ROLE_DEFS.map(r=>r.key);
    [...el.rows.querySelectorAll('.row')].forEach((row,i)=>{
      const key = keys[i]; const inp = row.querySelector('input');
      if(state.roles[key]) inp.value = state.roles[key].count;
    });
    // auto-run locally for smooth ticking
    state.running = true; state.lastTs = 0; requestAnimationFrame(loop);
    return true;
  }

  // Controls
  el.startPause.addEventListener('click', ()=>{
    state.running = !state.running;
    el.startPause.textContent = state.running ? 'Pause' : 'Resume';
    if(state.running){
      // first start creates anchor if one doesn't exist
      if(!state.anchor){ state.anchor = { startAt: Date.now(), mix: snapshotMix() }; updateHash(); }
      state.lastTs = 0; requestAnimationFrame(loop);
    }
  });

  el.reset.addEventListener('click', ()=>{
    state.running = false;
    el.startPause.textContent = 'Start';
    state.lastTs = 0; state.elapsedMs = 0; state.costAccrued = 0;
    // reset counts
    for(const k in state.roles){ state.roles[k].count = 0; }
    el.rows.querySelectorAll('.qty input').forEach(inp => { inp.value = 0; });
    // clear share anchor and URL hash
    state.anchor = null; history.replaceState(null,'',location.pathname + location.search);
    draw();
  });

  el.copyLink.addEventListener('click', async ()=>{
    // If not started, stage anchor using current mix and now
    if(!state.anchor){ state.anchor = { startAt: Date.now(), mix: snapshotMix() }; updateHash(); }
    const url = location.href;
    try{ await navigator.clipboard.writeText(url); el.shareStatus.textContent = 'Link copied'; }
    catch{ el.shareStatus.textContent = 'Copy failed'; }
    setTimeout(()=>{ el.shareStatus.textContent=''; }, 2000);
  });

  // Rate computation, choose anchor mix when present for consistency
  function perMinute(){
    const src = state.anchor?.mix || state.roles;
    let sum = 0; for(const k in src){ const v = src[k]; sum += (Number(v.count)||0) * (Number(v.rate)||0) / 60; }
    return sum;
  }

  function loop(ts){
    if(!state.running) return;
    if(!state.lastTs) state.lastTs = ts;
    const dt = ts - state.lastTs; state.lastTs = ts;
    if(!state.anchor){ // local mode
      state.elapsedMs += dt;
      state.costAccrued += (perMinute()/60000) * dt;
    }
    draw();
    requestAnimationFrame(loop);
  }

  function draw(){
    const elapsed = state.anchor ? (Date.now() - state.anchor.startAt) : state.elapsedMs;
    const total = Math.max(0, Math.floor(elapsed/1000));
    const mm = String(Math.floor(total/60)).padStart(2,'0');
    const ss = String(total%60).padStart(2,'0');
    el.time.textContent = `${mm}:${ss}`;

    if(state.anchor){
      const dollarsPerMinute = perMinute();
      el.cost.textContent = `$${((elapsed/60000)*dollarsPerMinute).toFixed(2)}`;
      el.rate.textContent = `Accruing at $${dollarsPerMinute.toFixed(2)} per minute`;
    } else {
      el.cost.textContent = `$${state.costAccrued.toFixed(2)}`;
      el.rate.textContent = `Accruing at $${perMinute().toFixed(2)} per minute`;
    }
  }

  if(!loadFromHash()) draw();
})();
</script>
</body>
</html>
